<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENTIRIC | FLIGHT RECORDER</title>
    <link rel="stylesheet" href="/ui/css/theme.css">
    <link rel="stylesheet" href="/ui/css/layout.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- COMMAND HEADER -->
        <header>
            <div class="h-section brand-area">
                <span class="pulse-icon">üìº</span>
                <div class="brand-meta">
                    <h1 class="sys-title">FLIGHT RECORDER <span class="ver">v7.0</span></h1>
                    <span class="sys-sub">SOVEREIGN TELEMETRY & FORENSICS</span>
                </div>
            </div>

            <!-- MISSION CONTROL WIDGETS -->
            <div class="h-section control-deck">
                <!-- SNIFFER CONTROLLER -->
                <div class="tactical-pod">
                    <div class="pod-info">
                        <span class="lbl">NETWORK INTERCEPT</span>
                        <span id="sniffer-status" class="val standby">STANDBY</span>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="sniffer-toggle">
                        <span class="slider"></span>
                    </label>
                </div>
                
                <div class="separator"></div>

                <!-- CONNECTION STATUS -->
                <div class="tactical-pod compact">
                    <span class="lbl">UPLINK</span>
                    <div id="ws-status" class="conn-dot offline"></div>
                </div>
            </div>

            <div class="h-section metrics-area">
                <div class="metric"><b id="pps-val">0</b><small>PPS</small></div>
                <div class="metric"><b id="buffer-val">0%</b><small>BUFFER</small></div>
                <div class="metric"><b id="total-val">0</b><small>EVENTS</small></div>
            </div>
        </header>

        <!-- INTELLIGENCE TOOLBAR -->
        <nav id="toolbar">
            <div class="filter-primary">
                <span class="icon">üîç</span>
                <input type="text" id="filter-trace" placeholder="TRACE LOCK (Call-ID / Trace-ID)...">
            </div>

            <div class="filter-group">
                <input type="text" id="filter-svc" placeholder="Service..." class="glass-inp small">
                <input type="text" id="filter-msg" placeholder="Deep Search..." class="glass-inp grow">
                <select id="filter-level" class="glass-select">
                    <option value="ALL">ALL LEVELS</option>
                    <option value="WARN">WARN+</option>
                    <option value="ERROR">ERROR</option>
                </select>
            </div>

            <!-- NOISE FILTER: RTP'leri gizler/g√∂sterir -->
            <button id="btn-toggle-noise" class="tool-btn active" title="Hide RTP/Noise">
                <span class="btn-icon">üîá</span> <span id="noise-text">NOISE: HIDDEN</span>
            </button>

            <div class="separator"></div>

            <div class="action-group">
                <button id="btn-pause" class="tool-btn">PAUSE</button>
                <button id="btn-export" class="tool-btn export">AI EXPORT</button>
                <button id="btn-clear" class="tool-btn danger">WIPE</button>
            </div>
        </nav>

        <!-- MAIN VIEWPORT -->
        <main id="workspace">
            <div id="log-matrix">
                <div class="matrix-head">
                    <div class="col-ts">TIME (UTC)</div>
                    <div class="col-lvl">LVL</div>
                    <div class="col-svc">SERVICE</div>
                    <div class="col-evt">EVENT</div>
                    <div class="col-msg">PAYLOAD SNAPSHOT</div>
                </div>
                <div id="log-scroller">
                    <div id="log-content"></div>
                </div>
            </div>

            <!-- FORENSIC INSPECTOR & TIMELINE -->
            <aside id="inspector">
                <div class="insp-header">
                    <div class="tab-triggers">
                        <button class="tab-btn active" data-target="view-details">DETAILS</button>
                        <button class="tab-btn" data-target="view-timeline">TIMELINE</button>
                    </div>
                    <button id="btn-close-insp" class="close-x">‚úï</button>
                </div>

                <!-- VIEW 1: DETAILS -->
                <div id="view-details" class="insp-view active">
                    <!-- RTP FLOW DIAGNOSTICS (Sadece RTP/SIP varsa g√∂r√ºn√ºr) -->
                    <div id="rtp-card" class="data-card" style="display:none;">
                        <div class="card-head"><span>üåä RTP STREAM HEALTH</span> <span id="rtp-codec" class="badge">PCMU</span></div>
                        <div class="card-body">
                            <div class="stat-grid">
                                <div><span>PT</span><b id="rtp-pt">0</b></div>
                                <div><span>SEQ</span><b id="rtp-seq">0</b></div>
                                <div><span>LEN</span><b id="rtp-len">0B</b></div>
                            </div>
                            <!-- Live Flow Bar -->
                            <div class="flow-meter"><div id="flow-bar"></div></div>
                        </div>
                    </div>

                    <div class="data-card">
                        <div class="card-head">RAW PAYLOAD</div>
                        <pre id="raw-payload" class="code-block"></pre>
                    </div>

                    <div class="data-card">
                        <div class="card-head">ATTRIBUTES</div>
                        <pre id="json-viewer" class="code-block"></pre>
                    </div>
                </div>

                <!-- VIEW 2: CAUSALITY TIMELINE -->
                <div id="view-timeline" class="insp-view">
                    <div class="timeline-container">
                        <div id="timeline-content" class="timeline-list">
                            <!-- JS ile doldurulacak -->
                            <div class="empty-state">Lock a trace to see causality timeline.</div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <footer>
            <div class="f-item">NODE: <span id="node-name" style="color:#fff">--</span></div>
            <div class="f-item status-ok">SYSTEM HEALTHY</div>
        </footer>
    </div>

    <script src="/ui/js/config.js"></script>
    <script type="module" src="/ui/js/app.js"></script>
</body>
</html>