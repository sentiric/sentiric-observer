/* src/ui/css/layout.css - SOVEREIGN THEME v5.1 */
:root {
    --bg-dark: #050505;
    --bg-panel: #0d1117;
    --bg-header: #0a0a0a;
    --bg-hover: #161b22;
    --border: #222;
    
    --accent: #00ff9d;
    --danger: #f85149;
    --warn: #d29922;
    --info: #58a6ff;
    --purple: #c084fc;
    
    --text-main: #ccc;
    --text-dim: #666;
    
    --h-header: 56px;
    --h-toolbar: 44px;
    --h-footer: 24px;
    --w-left: 280px;
    --w-right: 480px;
}

body, html { 
    margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden; 
    background: var(--bg-dark); color: var(--text-main); 
    font-family: 'Inter', -apple-system, sans-serif; 
}

#app-root { display: flex; flex-direction: column; height: 100vh; }

h1, h2, h3 { margin: 0; }
.mono { font-family: 'JetBrains Mono', monospace; }

/* HEADER */
#main-header {
    height: var(--h-header); background: var(--bg-header); border-bottom: 1px solid var(--border);
    display: flex; justify-content: space-between; align-items: center; padding: 0 20px; z-index: 500;
}
.h-left, .h-right { width: 300px; display: flex; align-items: center; }
.h-right { justify-content: flex-end; }
.h-center { flex: 1; display: flex; justify-content: center; align-items: center; gap: 24px; }

/* TOOLBAR */
#toolbar {
    height: var(--h-toolbar); background: var(--bg-hover); border-bottom: 1px solid #30363d;
    display: flex; align-items: center; padding: 0 15px; gap: 15px; z-index: 400;
}
.search-unit { flex: 0 0 350px; position: relative; }
.search-unit input { 
    width: 100%; background: #000; border: 1px solid #333; color: #fff; 
    padding: 6px 10px 6px 28px; border-radius: 4px; font-size: 11px; 
    outline: none; transition: border 0.2s; font-family: 'JetBrains Mono'; box-sizing: border-box;
}
.search-unit input:focus { border-color: var(--accent); box-shadow: 0 0 5px rgba(0,255,157,0.2); }
.search-unit .icon { position: absolute; left: 8px; font-size: 12px; color: #555; top: 7px; }



#trace-locator { background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 50; overflow: hidden; }
#matrix-pane { background: var(--bg-dark); display: flex; flex-direction: column; min-width: 0; height: 100%; overflow: hidden; }
#inspector { background: var(--bg-header); border-left: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; z-index: 60; }

/* SCROLLER */
.scroller { 
    flex: 1; overflow-y: auto; overflow-x: hidden; 
    scrollbar-width: thin; scrollbar-color: #333 transparent; 
    height: 100%; 
    transform: translateZ(0); 
    will-change: scroll-position;
}
.scroller:hover { scrollbar-color: var(--accent) transparent; }

/* MATRIX (Hata Çözüldü: Min-height eklendi, content-visibility silindi) */
.matrix-head {
    display: grid; grid-template-columns: 85px 55px 120px 140px 185px 1fr; gap: 10px;
    padding: 8px 15px; background: #111; font-size: 10px; font-weight: 800; color: #666;
    border-bottom: 1px solid #222; letter-spacing: 1px; flex-shrink: 0;
}
#matrix-content { display: block; }

.log-row {
    display: grid; grid-template-columns: 85px 55px 120px 140px 185px 1fr; gap: 10px;
    padding: 6px 15px; border-bottom: 1px solid #111; cursor: pointer;
    font-family: 'JetBrains Mono', monospace; font-size: 11px; align-items: center; 
    white-space: nowrap; color: #aaa;
    min-height: 28px; /* DÜZELTME: Satırların ezilmesini önler */
}
.log-row:hover { background: #1a1a1a; color: #fff; }
.log-row.selected { background: rgba(0, 255, 157, 0.08) !important; border-left: 2px solid var(--accent); padding-left: 13px; color: #fff; }

.message-cell { display: flex; align-items: center; justify-content: space-between; overflow: hidden; gap: 15px; }
.message-text { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #999; }
.tags-container { display: flex; gap: 5px; }

/* PANES (Hata Çözüldü: Flex wrap düzeltildi) */
.pane-header { 
    padding: 12px 15px; background: rgba(0,0,0,0.3); border-bottom: 1px solid #222; 
    font-size: 10px; font-weight: 800; color: #888; letter-spacing: 1px; 
    display: flex; justify-content: space-between; align-items: center; 
}
.pane-header.tabbed { padding: 0; display: flex; background: #111; }
.empty-hint { padding: 20px; text-align: center; color: #555; font-size: 11px; font-style: italic; }

/* FOOTER */
#main-footer { height: var(--h-footer); background: var(--bg-panel); border-top: 1px solid #222; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; font-size: 9px; color: #555; letter-spacing: 1px; font-weight: bold; z-index: 500;}
.accent { color: var(--accent); }

/* --- DİNAMİK GRID VE SOL MENÜ YÖNETİMİ --- */

#workspace {
    display: grid;
    /* Varsayılan: Sol Açık (280px) | Orta (Esnek) | Sağ Kapalı (0px) */
    grid-template-columns: var(--w-left) 1fr 0px; 
    overflow: hidden; 
    height: calc(100vh - var(--h-header) - var(--h-toolbar) - var(--h-footer)); 
    transition: grid-template-columns 0.25s cubic-bezier(0.4, 0, 0.2, 1); /* Profesyonel geçiş animasyonu */
}

/* DURUM 1: Sol Panel Kapalı */
#workspace.left-collapsed {
    grid-template-columns: 40px 1fr 0px;
}

/* DURUM 2: Sağ Panel Açık */
#workspace.inspector-open {
    grid-template-columns: var(--w-left) 1fr var(--w-right);
}

/* DURUM 3: Sol Kapalı + Sağ Açık */
#workspace.left-collapsed.inspector-open {
    grid-template-columns: 40px 1fr var(--w-right);
}

/* --- SOL PANEL KAPALIYKEN GİZLENECEK ELEMANLAR --- */

/* 1. Başlık (CALL JOURNEYS) gizlensin */
#workspace.left-collapsed #trace-locator .pane-header > span {
    display: none;
}

/* 2. Çöp Kutusu butonu gizlensin */
#workspace.left-collapsed #trace-locator #btn-clear-traces {
    display: none;
}

/* 3. Liste, Kaydırma Çubuğu ve Footer (Unlock Butonu) gizlensin */
#workspace.left-collapsed #trace-list,
#workspace.left-collapsed .pane-footer {
    display: none !important;
}

/* 4. Header sadece Ok tuşunu ortalasın */
#workspace.left-collapsed #trace-locator .pane-header {
    justify-content: center; /* Ortala */
    padding: 0;              /* Boşlukları sil */
}

/* 5. Header içindeki buton grubu sıkışmasın */
#workspace.left-collapsed .header-controls {
    gap: 0 !important;
}